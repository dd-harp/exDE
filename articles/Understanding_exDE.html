<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="exDE">
<title>Understanding exDE • exDE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Understanding exDE">
<meta property="og:description" content="exDE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">exDE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Understanding_exDE.html">Understanding exDE</a>
    <a class="dropdown-item" href="../articles/modularity.html">Modular Forms for Disease Dynamics</a>
    <a class="dropdown-item" href="../articles/ex_534.html">5-3-4 Spatial Example</a>
    <a class="dropdown-item" href="../articles/spat_metric.html">Spatial Metrics</a>
    <a class="dropdown-item" href="../articles/vc_lemenach.html">Vector Control Example</a>
    <a class="dropdown-item" href="../articles/Contributing.html">Contributing</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-adult-mosquito-dynamics">Adult Mosquito Dynamics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-adult-mosquito-dynamics">
    <a class="dropdown-item" href="../articles/adult_RM.html">Ross-Macdonald model</a>
    <a class="dropdown-item" href="../articles/adult_GeRM.html">Generalized Ross-Macdonald model</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-aquatic-mosquito-dynamics">Aquatic Mosquito Dynamics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-aquatic-mosquito-dynamics">
    <a class="dropdown-item" href="../articles/aqua_trace.html">Trace (forced) model</a>
    <a class="dropdown-item" href="../articles/aqua_basic.html">Basic competition model</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-human-infection-dynamics">Human Infection Dynamics</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-human-infection-dynamics">
    <a class="dropdown-item" href="../articles/human_sis.html">SIS model</a>
    <a class="dropdown-item" href="../articles/human_sip.html">SIP model</a>
    <a class="dropdown-item" href="../articles/human_hmoi.html">MoI hybrid model</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dd-harp/exDE/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Understanding exDE</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/exDE/blob/HEAD/vignettes/Understanding_exDE.Rmd" class="external-link"><code>vignettes/Understanding_exDE.Rmd</code></a></small>
      <div class="d-none name"><code>Understanding_exDE.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of developing <code>exDE</code> was to lower the costs of
building models (<em>e.g.</em> time spent developing, coding, verifying,
debugging, &amp; <em>etc.</em>) that are realistic enough to support
decisions affecting malaria policies. The operating assumption of the
development process has been that robust decision support for malaria
policies would put demands on model-building that differ from what is
expected from a scientific publication. In some ways, it was the need
for <em>realism</em> and the associated <em>computational
complexity</em> that drove the development of several
<em>individual-based models</em> (IBMs). While models developed as
systems of differential equations can not replicate some advantages that
come from being <em>individual-based,</em> we wanted software that could
handle computational complexity just as well as IBMs. The advantage is
that the resulting models would be much easier to analyze.</p>
<p>We wanted a framework that could <em>scale complexity,</em> to start
with a simple model, and then progressively modifying the models to add
realism including:</p>
<ul>
<li><p>realistic human demography, including age structure, births &amp;
deaths, and migration.</p></li>
<li><p>spatial heterogeneity and spatial dynamics, including human
mobility and mosquito dispersal</p></li>
<li><p>exogenous forcing by weather and other factors</p></li>
<li><p>multiple host and vector species or types</p></li>
</ul>
<p>If we think of a model as defining a <em>skill set,</em> or output
variables that naturally represent a subset of all possible features,
then the framework should make it easy to build models that have the
right subset of features. The models should be – as Einstein suggested –
as simple as possible, but no simpler. While most people would agree
with Einstein in principle, he provided no usable advice about how to do
this. How would you know a model had the right level of complexity
unless, at some point, a model had been developed that was clearly too
complex?</p>
<p>To support decisions, model building must be <em>nimble.</em> As
malaria programs integrate sophisticated analytics into their
decision-making, the conversation in a room can shift. Over time,
programmatic priorities and needs can change. To keep up, the model
builders <em>ought</em> to have the capability of building new models
that could address the new concerns. While this might not be possible to
do in real time, it should be possible to have a new model developed
with preliminary results within a week or so.</p>
<p>With these goals in mind, we developed a mathematical framework that
could make computation for dynamical systems <strong>modular.</strong>
The mathematical basis for modularity was described in <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1010684" target="_blank" class="external-link">Spatial Dynamics of Malaria Transmission</a>. We have
also developed a <em>vignette</em> that describes the <a href="modularity.html" target="_blank">modular forms</a> that we use to
describe models implemented in <code>exDE</code>.</p>
</div>
<div class="section level2">
<h2 id="structural-elements">Structural Elements<a class="anchor" aria-label="anchor" href="#structural-elements"></a>
</h2>
<p>Each model has several structural parameters that describe the basic
features of a model:</p>
<ul>
<li>
<p><code>nPatches</code> – the number of distinct <em>patches</em>
in a model.</p>
<ul>
<li>A model has <em>spatial dynamics</em> if <code>nPatches</code><span class="math inline">\(&gt;1,\)</span> making it necessary to</li>
</ul>
</li>
<li><p>Aqu</p></li>
<li><p><code>nHabitats</code> – the number of distinct <em>patches</em>
in a model.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="dynamical-components">Dynamical Components<a class="anchor" aria-label="anchor" href="#dynamical-components"></a>
</h2>
<p>We identified three inseparable chunks of any model that would need
to be internally coherent but that could be represented in several
different ways. The chunks represented five distinct processes:</p>
<ul>
<li>
<p>Models for human ecology and parasite / pathogen infection
dynamics would appear in one dynamical component. The part that computes
the dynamics of infection and immunity was called <span class="math inline">\(\cal X\)</span>, and the part that describes human
demography was called <span class="math inline">\(\cal H.\)</span> These
two components can’t be separated in any easy way, so we call this chunk
<span class="math inline">\(\cal XH\)</span>.</p>
<ul>
<li><p>The derivatives for a model of this type are computed by a
<code>S3</code> function <code>dXdt</code></p></li>
<li><p>The parameters for the model are in an object called
<code>Xpar</code> and the model dispatches on
<code>class(Xpar)</code></p></li>
<li><p>Since there could be multiple host species, the <span class="math inline">\(i^{th}\)</span> species is in
<code>pars$Xpar[[i]].</code></p></li>
<li><p>The function <code>dXdt</code> dispatches on
<code>class(pars$Xpar[[i]])</code></p></li>
</ul>
</li>
<li><p>Models for adult mosquito ecology and parasite / pathogen
infection dynamics would appear in a second dynamical component. The
part that computes the dynamics of infection was called <span class="math inline">\(\cal YZ\)</span>, and the part that computes
mosquito population dynamics was called <span class="math inline">\(\cal
M\)</span>. These two components can’t be separated in any easy way, so
we call this chunk <span class="math inline">\(\cal
MYZ\)</span>.</p></li>
<li><p>Models for aquatic mosquito ecology were called <span class="math inline">\(\cal L\)</span>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="interfaces">Interfaces<a class="anchor" aria-label="anchor" href="#interfaces"></a>
</h2>
<p>In developing a modular framework, we recognized the need to develop
a rigorous yet flexible <em>interface</em> that would allow different
dynamical components to interact. To connect these two dynamical
components, we developed two well-defined interfaces:</p>
<ul>
<li><p>A <em>model</em> for <strong>blood feeding</strong> and parasite
/ pathogen <strong>transmission</strong> by mosquitoes. This model
<em>should</em> constrain mosquito blood feeding rates and the human
fraction in sensible ways.</p></li>
<li><p>A description of the locations of aquatic habitats and a
<em>model</em> for <strong>egg laying</strong> and
<strong>emergence.</strong></p></li>
</ul>
<p>In a related vignette, a Ross-Maconald model is presented in its <a href="modularity.html">modular form</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sean L. Wu, David L. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
